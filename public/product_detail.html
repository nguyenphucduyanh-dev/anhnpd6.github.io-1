product_detail.html": """<!doctype html>
<html lang="vi">
<head><meta charset="utf-8"><title>Chi tiết sản phẩm</title><meta name="viewport" content="width=device-width,initial-scale=1">
<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet"></head>
<body>
<div class="container py-4">
  <div id="detail"></div>
  <a href="product_list.html" class="btn btn-secondary mt-3">Quay lại</a>
</div>
<script>
function qs(){ const params = new URLSearchParams(location.search); return params.get('code'); }
function getProducts(){ return JSON.parse(localStorage.getItem('products')||'[]'); }
function addToCart(code){ let cart=JSON.parse(localStorage.getItem('cart')||'[]'); const p=getProducts().find(x=>x.code===code); if(!p){alert('Không tìm thấy');return;} cart.push({code:p.code,name:p.name, qty:1}); localStorage.setItem('cart', JSON.stringify(cart)); alert('Đã thêm vào giỏ'); }
(function(){
  const code = qs(); const p = getProducts().find(x=>x.code===code);
  if(!p) { document.getElementById('detail').innerHTML='Không tìm thấy sản phẩm'; return; }
  document.getElementById('detail').innerHTML = `<h3>${p.name} (${p.code})</h3><img src="${p.image||'https://via.placeholder.com/600x400'}" style="max-width:400px"><p>${p.desc||''}</p><button class="btn btn-success" onclick="addToCart('${p.code}')">Mua</button>`;
})();
</script>
</body>
</html>
