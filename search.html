<!doctype html>
<html lang="vi">
<head><meta charset="utf-8"><title>Tìm kiếm</title><meta name="viewport" content="width=device-width,initial-scale=1">
<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet"></head>
<body>
<div class="container py-4">
  <h3>Tìm sản phẩm</h3>
  <form id="sform" class="row g-2">
    <div class="col-md-4"><input id="name" class="form-control" placeholder="Tên sản phẩm"></div>
    <div class="col-md-3"><input id="type" class="form-control" placeholder="Loại (tùy chọn)"></div>
    <div class="col-md-3"><input id="min" type="number" class="form-control" placeholder="Giá min"></div>
    <div class="col-md-2"><button class="btn btn-primary w-100">Tìm</button></div>
  </form>
  <div id="results" class="mt-3"></div>
</div>
<script>
function getProducts(){ return JSON.parse(localStorage.getItem('products')||'[]'); }
document.getElementById('sform').addEventListener('submit', function(e){
  e.preventDefault();
  const name=document.getElementById('name').value.toLowerCase();
  const type=document.getElementById('type').value.toLowerCase();
  const min=parseFloat(document.getElementById('min').value||'0');
  const res = getProducts().filter(p=>{
    if(name && !p.name.toLowerCase().includes(name)) return false;
    if(type && !p.type.toLowerCase().includes(type)) return false;
    // price not available in product model; ignore for demo
    return true;
  });
  document.getElementById('results').innerHTML = '<div class="list-group">'+res.map(p=>`<a class="list-group-item list-group-item-action" href="product_detail.html?code=${encodeURIComponent(p.code)}">${p.name} - ${p.code}</a>`).join('')+'</div>';
});
</script>
</body>
</html>
