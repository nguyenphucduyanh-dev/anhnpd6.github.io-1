<!doctype html>
<html lang="vi">
<head><meta charset="utf-8"><title>Đơn đã mua</title><meta name="viewport" content="width=device-width,initial-scale=1">
<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet"></head>
<body>
<div class="container py-4">
  <h3>Đơn hàng của tôi</h3>
  <div id="list"></div>
</div>
<script>
const session = JSON.parse(localStorage.getItem('session')||'null');
if(!session) { alert('Đăng nhập để xem đơn hàng'); location.href='login.html'; }
function render(){
  const orders = JSON.parse(localStorage.getItem('orders')||'[]').filter(o=>o.customer===session.name);
  if(orders.length===0){ document.getElementById('list').innerHTML='Không có đơn hàng'; return; }
  document.getElementById('list').innerHTML = orders.map(o=>`<div class="card mb-2"><div class="card-body"><h5>${o.code} - ${o.status}</h5><p>Ngày: ${o.date}</p><p>Địa chỉ: ${o.address}</p><pre>${JSON.stringify(o.items,null,2)}</pre></div></div>`).join('');
}
render();
</script>
</body>
</html>
